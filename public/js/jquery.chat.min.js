/*! jChat 2014-07-10 */
!function(a){a.fn.chat=function(c){return plug=a.fn.chat,o=a.extend({},plug.defaults,c),this.each(function(){var c=new b;a(this).find("#chatForm").on("submit",function(a){c.submitMsg(this,a)})})};var b=function(){this.socket=io(),this.user="anonym",this.initUser(),this.initChat()};b.prototype={submitMsg:function(b,c){return c.preventDefault(),this.socket.emit("chat message",{time:this.getTimeString(new Date),user:this.user,msg:a("#m").val()}),a("#m").val(""),!1},initChat:function(){this.socket.on("chat message",function(b){a("#messages").append(a("<li></li>").append(a("<span>").text(b.time),a("<b>").text("undefined"!=typeof b.user?b.user+": ":""),a("<span>").text(b.msg)))})},initUser:function(){"anonym"===this.user&&(a("#user-wrapper").show(),a("#userForm").on("submit",a.proxy(function(b){b.preventDefault(),this.user=a("#name").val(),a("#user-wrapper").hide()},this)))},getTimeString:function(a){var b=new Date(a);return"["+(b.getHours()<10?"0"+b.getHours():b.getHours())+":"+(b.getMinutes()<10?"0"+b.getMinutes():b.getMinutes())+"] "}},a.fn.chat.defaults={io:null}}(jQuery);